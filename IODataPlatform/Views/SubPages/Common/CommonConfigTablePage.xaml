<Page 
    x:Class="IODataPlatform.Views.SubPages.Common.ConfigTablePage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
    xmlns:local="clr-namespace:IODataPlatform.Views.SubPages.Common"
    xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
      xmlns:cus="clr-namespace:LYSoft.Libs.Wpf.WpfUI.Custom;assembly=LYSoft.Libs.Wpf.WpfUI"
      ui:NavigationView.HeaderContent="{Binding ViewModel.Title}"
    d:DataContext="{d:DesignInstance local:ConfigTablePage, IsDesignTimeCreatable=False}"
    Foreground="{DynamicResource TextFillColorPrimaryBrush}"
    ScrollViewer.CanContentScroll="False"
    mc:Ignorable="d">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <Menu>
            <ui:MenuItem Icon="{ui:SymbolIcon ArrowHookUpLeft24}" Header="返回" Command="{Binding ViewModel.ConvertBackCommand}"/>
            <ui:MenuItem Icon="{ui:SymbolIcon Add24}" Header="添加" Command="{Binding ViewModel.AddCommand}"/>
            <ui:MenuItem Icon="{ui:SymbolIcon ArrowImport24}" Header="批量导入" Command="{Binding ViewModel.BatchImportCommand}"/>
        </Menu>

        <cus:CustomDataGrid Grid.Row="1"
                            Margin="0,10"
                            Style="{StaticResource DataGridStyle}"
                            AutoGenerateColumns="True"
                            IsReadOnly="True"
                            ItemsSource="{Binding ViewModel.Data}"
                            Width="auto"
                            HorizontalAlignment="Left">
            <ui:DataGrid.Columns>
                <DataGridTemplateColumn Width="108"
                                        Header="操作">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal">
                                <ui:Button CommandParameter="{Binding}"
                                           Icon="{ui:SymbolIcon Edit24}"
                                           Command="{Binding RelativeSource={RelativeSource AncestorType=local:ConfigTablePage}, Path=ViewModel.EditCommand}" />
                                <ui:Button Margin="2,0,0,0"
                                           Icon="{ui:SymbolIcon Delete24}"
                                           Appearance="Danger"
                                           CommandParameter="{Binding}"
                                           Command="{Binding RelativeSource={RelativeSource AncestorType=local:ConfigTablePage}, Path=ViewModel.DeleteCommand}" />
                            </StackPanel>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </ui:DataGrid.Columns>
        </cus:CustomDataGrid>

    </Grid>
</Page>
