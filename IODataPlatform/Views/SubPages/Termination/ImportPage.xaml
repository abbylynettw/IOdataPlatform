<Page 
    x:Class="IODataPlatform.Views.SubPages.Termination.ImportPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
    xmlns:local="clr-namespace:IODataPlatform.Views.SubPages.Termination"
    xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
    ui:NavigationView.HeaderContent="导入数据"
    d:DataContext="{d:DesignInstance local:ImportPage, IsDesignTimeCreatable=False}"
    Foreground="{DynamicResource TextFillColorPrimaryBrush}"
    ScrollViewer.CanContentScroll="False"
    mc:Ignorable="d">

    <Grid>
        
        <Grid.RowDefinitions>
            <RowDefinition Height="auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="auto"/>
            <ColumnDefinition Width="auto"/>
        </Grid.ColumnDefinitions>

        <Menu Grid.ColumnSpan="3">
            <ui:MenuItem Icon="{ui:SymbolIcon ArrowHookUpLeft24}" Header="返回" Command="{Binding ViewModel.ConvertBackCommand}"/>
            <ui:MenuItem Header="选择文件" Command="{Binding ViewModel.ImportFileCommand}"/>
            <ui:MenuItem Header="提交" Command="{Binding ViewModel.ConfirmCommand}"/>
        </Menu>
   
        <ui:DataGrid Grid.Row="1" Grid.Column="0" Margin="0,0,5,10" Style="{StaticResource DataGridStyle}" ItemsSource="{Binding ViewModel.DiffObjects}">
            <ui:DataGrid.Columns>
                <DataGridTextColumn MinWidth="100" Header="ID" Binding="{Binding Key}" ElementStyle="{StaticResource DataGridTextBlockCellStyle_Center}"/>
                <DataGridTextColumn MinWidth="100" Header="冲突类型" Binding="{Binding Type}" ElementStyle="{StaticResource DataGridTextBlockCellStyle_Center}"/>
                <DataGridTemplateColumn Width="53" Header="操作">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <ui:Button Command="{Binding RelativeSource={RelativeSource AncestorType=local:ImportPage}, Path=ViewModel.ViewDataCommand}"
                                       CommandParameter="{Binding}" Content="查看"/>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </ui:DataGrid.Columns>
        </ui:DataGrid>

        <ui:DataGrid Grid.Row="1" Grid.Column="1" Margin="5,0,0,10" Style="{StaticResource DataGridStyle}" ItemsSource="{Binding ViewModel.DiffProps}">
            <ui:DataGrid.Columns>
                <DataGridTextColumn MinWidth="120" Header="字段名称" Binding="{Binding PropName}" ElementStyle="{StaticResource DataGridTextBlockCellStyle_Center}"/>
                <DataGridTextColumn MinWidth="100" Header="旧值" Binding="{Binding OldValue}" ElementStyle="{StaticResource DataGridTextBlockCellStyle_Center}"/>
                <DataGridTextColumn MinWidth="100" Header="新值" Binding="{Binding NewValue}" ElementStyle="{StaticResource DataGridTextBlockCellStyle_Center}"/>
            </ui:DataGrid.Columns>
        </ui:DataGrid>

    </Grid>
    
</Page>